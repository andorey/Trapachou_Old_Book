<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>animation JS</title>
	<style>
		#square{
            position: absolute;
            top: 0;
            left: 0;
			width: 50px;
			height: 50px;
			border-radius: 50%;
			background: tomato;
			cursor: pointer;
			user-select: none;
		}
	</style>
</head>
<body>
<div id="square"></div>

<script>
    let ball = document.getElementById('square')
	let toggle = true
    let x = 0, y = 0;

    ball.addEventListener('click', function () {
        let start = Date.now();

        let timer = setInterval(function() {
            
            let timePassed = Date.now() - start;
            
            if(x > 800 || x < 0) toggle = !toggle
            
			if (toggle){
			    x += 5
                ball.style.left = x + 'px';
			    
			}else{
			    x -= 5
                ball.style.left = x + 'px';
			    y += 1
                ball.style.top = y + 'px';
            }
   
			
			
            if (timePassed > 20000) clearInterval(timer);

        }, 20);
    })

    ball.onmousedown = function(e) { // 1. отследить нажатие

        // подготовить к перемещению
        // 2. разместить на том же месте, но в абсолютных координатах
        ball.style.position = 'absolute';
        moveAt(e);
        // переместим в body, чтобы мяч был точно не внутри position:relative
        document.body.appendChild(ball);

        ball.style.zIndex = 10; // показывать мяч над другими элементами

        // передвинуть мяч под координаты курсора
        // и сдвинуть на половину ширины/высоты для центрирования
        function moveAt(e) {
            ball.style.left = e.pageX - ball.offsetWidth / 2 + 'px';
            ball.style.top = e.pageY - ball.offsetHeight / 2 + 'px';
        }

        // 3, перемещать по экрану
        document.onmousemove = function(e) {
            moveAt(e);
        }

        // 4. отследить окончание переноса
        ball.onmouseup = function() {
            document.onmousemove = null;
            ball.onmouseup = null;
        }
    }
</script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<style>
        #game {
            width: 100%;
            height: 100%;
            box-sizing: border-box;
            table-layout: fixed;
        }

        #game > div {
            display: flex;
        }

        #game > div > div {
            width: 20px;
            height: 20px;
            /*margin: 0.5px;*/
            border: 1px solid #edecec;
        }

        .player1 {
            background: tomato;
            border-radius: 50%;
        }

        .player2 {
            background: #02fbf7;
            border-radius: 50%;
        }

        .field {
            position: fixed;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            text-align: center;
            align-items: center;
            text-shadow: black -2px -3px 5px;
            color: rgb(255, 255, 255);
            font-size: 5em;
            font-weight: bold;
            background-color: rgba(0, 0, 0, 0.27)
        }

        .button {
            margin-bottom: 40px;
            font-size: 18px;
            background: #004351;
            color: white;
            text-shadow: black 4px 5px 2px;
            padding: 10px 20px;
            border-radius: 9px;
            box-shadow: white 0 0 15px;
        }

        .button:hover {
            background: repeating-linear-gradient(203deg, #f42900, #5cf9f9 50%, rgb(249, 24, 0));
        }
	</style>
	<title>five points OOP</title>
</head>
<body>
<div id="game"></div>
<script>
 
	class Field {
	    constructor(dom) {
	        this._dom = document.querySelector(dom);
	        this._rNum = Math.floor(window.innerHeight / 23);
	        this._cNum = Math.floor(window.innerWidth / 22);
	        this._field = Array.from({length: this._rNum}, () => Array.from({length: this._cNum}, () => 0));
	        this.draw();
        }
        
        draw(){
	        this._field.forEach((el, i) => {
	            let div = document.createElement('div');
	            el.forEach((e, k) => {
	                let div2 = document.createElement('div');
	                div2.dataset.xy = `${k},${i}`;
	                div.appendChild(div2);
				})
				this._dom.appendChild(div);
			})
   
		}
		
    }
    
    
    class Listener {
	    constructor() {
	        this.field = new Field('#game');
	        this.element = {};
	        this.player = 'player1';
	        //this.dot
	        this.point();
        }

        point() {
	        this.field._dom.addEventListener('click', el=> {
	            el.target.classList = this.player;
	            this.element = el.target;
                //this.dot = el.target.dataset.xy.split(',').map(Number)
        	});
	    }
	    
	}
	
	
	class Checker {
	    constructor(element) {
	        this.element = element;
	        this._columns = Math.floor(window.innerWidth / 22);
	        this._rows = Math.floor(window.innerHeight / 23);
	        this.clmn = Array(9).fill([0,-4]).map(([x,y], i) => [x, y+i]);
	        this.rows = Array(9).fill([-4,0]).map(([x,y], i) => [x+i, y]);
	        this.diagl = Array(9).fill([-4,-4]).map(([x,y], i) => [x+i, y+i]);
	        this.diagr = Array(9).fill([4,-4]).map(([x,y], i) => [x-i, y+i]);
	        //this.check();
			this.coordinats = this.element.dataset.xy.split(',').map(Number);
			this.player = this.element.classList[0]
			this.out = [];
        }

        createArr(arr) {
            let xy = this.coordinats;
            const temp = []
            for(let i of arr){
                if(xy[0]- i[0] > - 1 && xy[1] - i[1] > - 1 && xy[0] - i[0] < this._columns && xy[1] - i[1] < this._rows){
                    temp.push([xy[0] - i[0], xy[1] - i[1]]);
				}
			}
            return temp.map( ([x,y])=> document.querySelector(`[data-xy='${x},${y}']`).classList[0] || '$$$').join('').includes(this.player.repeat(5));
            //return temp.map(([x,y]) => document.querySelector(`[data-xy='${y},${y}']`).classList[0] || '###').join('').includes(this.player.repeat(5))
        }
        
        check() {
	        console.log(this.coordinats)
			console.log(this.createArr(this.clmn))
            // this.out = this.diagr.map(el => document.querySelector(`[data-xy='${xy[0] - el[0]},${xy[1] - el[1]}']`).classList[0] || '###').join('');
            //
            // console.log(this.out.includes(checking))
        }
    }
	
	let listen = new Listener();
	setInterval(()=> console.log(new Checker(listen.element).check()), 3000);
	
	
	
	// game._dom.addEventListener('click', el=> {
	//     console.log( el.target.dataset.xy.split(',').map(Number) )
	// })
	
</script>
</body>
</html>
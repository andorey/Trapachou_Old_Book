<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>five_point</title>
	<style>
        #game {
            width: 100%;
            height: 100%;
            box-sizing: border-box;
            table-layout: fixed;
        }

        #game > div {
            display: flex;
        }

        #game > div > div {
            width: 20px;
            height: 20px;
            padding: 0;
            border: 1px solid darkgray;
        }

        .player1 {
            background: red;
            border-radius: 50%;
        }

        .player2 {
            background: cornflowerblue;
            border-radius: 50%;
        }
	</style>
</head>
<body>
<div id="game"></div>

<script>
    const game = document.getElementById('game');
    let columnNum = Math.floor(window.innerWidth / 22);
    let rowsNum = Math.floor(window.innerHeight / 22);
    let nextGamer = 0;
    let lineCheck =[];

    const fillField = function (game, columnNum, rowsNum) {
        for (let i = 0; i < rowsNum; i++) {
            lineCheck[i] = []
            let div = document.createElement('div');
            for (let j = 0; j < columnNum; j++) {
                let div2 = document.createElement('div');
                lineCheck[i][j] = div2.className ? 1 : 0;
                div2.addEventListener('click', function (event) {
                    if (!nextGamer && this.className === '') {
                        this.className = 'player1';
                        nextGamer = 1;
                    } else if (nextGamer && this.className === '') {
                        this.className = 'player2';
                        nextGamer = 0;
                    } else if (this.className && event.shiftKey) {
                        this.className = '';
                        nextGamer = !nextGamer;
                    }
                    lineCheck[i][j] = div2.className === 'player1' ? 3 : div2.className === 'player2' ? 5 : 0;
                    lineRow(lineCheck);
                    lineColumn(lineCheck);
                    diagonalLeft(lineCheck);
                    //diagonalRight(lineCheck)
                })
                div.appendChild(div2)
            }
            game.appendChild(div)
        }
    }

    fillField(game, columnNum, rowsNum)
	
	function lineRow(arr) {
        let winner = '';
		for (let i of arr){
			if(i.join('').includes('33333')){ winner = 'Player 1' }
			if(i.join('').includes('55555')){ winner = 'Player 2' }
		}
		if(winner){
            alert('\f ' + winner + '\nis Winner!');
            location.reload()
		}
    }
    
    function lineColumn(arr) {
        let column = [];
		for(let i = 0; i < columnNum; i++){
		    column[i] = []
		    for(let j = 0; j < rowsNum; j++){
		        column[i][j] = arr[j][i]
			}
            lineRow(column)
		}
    }
    
    function diagonalLeft(arr) {
		let diagonal = []
		for ( let i = 0; i < rowsNum; i++){
		    diagonal[i] = [];
		    for (let j = i; j >= 0; j--){
				diagonal[i][j] = arr[i-j][j]
			}
            lineRow(diagonal)
		}
    }

    // function diagonalRight(arr) {
    //     let diagonal = []
    //     for ( let i = arr.length - 1; i > -1;  i--){
    //         diagonal[i] = [];
    //         for (let j = 0; j < arr.length - 1 - i; j++){
    //             diagonal[i][j] = arr[i][j]
    //         }
    //         console.log(diagonal)
    //     }
    // }
	
</script>
</body>
</html>
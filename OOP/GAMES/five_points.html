<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>five_point</title>
	<style>
        #game {
            width: 100%;
            height: 100%;
            box-sizing: border-box;
            table-layout: fixed;
        }

        #game > div {
            display: flex;
        }

        #game > div > div {
            width: 20px;
            height: 20px;
            padding: 0;
            border: 1px solid darkgray;
        }

        .player1 {
            background: red;
            border-radius: 50%;
        }

        .player2 {
            background: cornflowerblue;
            border-radius: 50%;
        }
	</style>
</head>
<body>
<div id="game"></div>

<script>
    const game = document.getElementById('game');
    let columnNum = Math.floor(window.innerWidth / 22);
    let rowsNum = Math.floor(window.innerHeight / 22);
    let nextGamer = 0;
    let lineCheck =[];
    let lines;

    const fillField = function (game, columnNum, rowsNum) {
        for (let i = 0; i < rowsNum; i++) {
            lineCheck[i] = [0]
            let div = document.createElement('div');
            for (let j = 0; j < columnNum; j++) {
                let div2 = document.createElement('div');
                lineCheck[i][j] = div2.className ? 1 : 0;
                div2.addEventListener('click', function (event) {
                    if (!nextGamer && this.className === '') {
                        this.className = 'player1';
                        nextGamer = 1;
                    } else if (nextGamer && this.className === '') {
                        this.className = 'player2';
                        nextGamer = 0;
                    } else if (this.className && event.shiftKey) {
                        this.className = '';
                        nextGamer = !nextGamer;
                    }
                    lineCheck[i][j] = div2.className === 'player1' ? 3 : div2.className === 'player2' ? 5 : 0;
                    lineRow(lineCheck);
                    lineColumn(lineCheck);
                    diagonalLeft(lineCheck)
                })
                div.appendChild(div2)
            }
            game.appendChild(div)
        }
    }

    fillField(game, columnNum, rowsNum)
	
	function lineRow(arr) {
		for (let i of arr){
			if(i.join('').includes('33333')){ alert('Player1 is WIN!!!'); location.reload() }
			if(i.join('').includes('55555')){ alert('Player2 is WIN!!!'); location.reload() }
		}
    }
    
    function lineColumn(arr) {
        let column = [];
		for(let i = 0; i < arr.length; i++){
		    column[i] = []
		    for(let j = 0; j < arr[j].length; j++){
		        column[i][j] = arr[j][i]
			}
            lineRow(column)
		}
    }
    
    // function diagonalLeft(arr) {
	// 	let diagonal = []
	// 	for ( let i = 0; i < arr[i].length; i++){
	// 	    diagonal[i] = [];
	// 	    for (let j = i; j > -1; j--){
	// 	        diagonal[i][j] = arr[i+j][j]
	// 		}
	// 	    console.log(diagonal)
	// 	}
    // }
	
</script>
</body>
</html>
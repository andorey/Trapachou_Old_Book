<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="UTF-8">
	<title>календарь с инпутом</title>
	<style>
        textarea{
            width: 300px;
            height: 200px;
            float: left;
        }
        div{
            float: left;
            margin-left: 20px;
        }
        div h4{
            margin: 0;
        }
        a{
            display: block;
        }
		input{
			font-size: .7em;
			margin: 5px;
			padding: 3px;
			color: snow;
			background: #012532;
		}
	</style>

</head>
<body>

<label>
	<textarea> </textarea>
</label>

<div>
	<h4>Сохраненые записи</h4>
	<input type="button" value="DELETE">
</div>


<script>
	(function () {

        let locals = Object.keys(localStorage) || [];
        let textarea = document.querySelector('textarea');
        let div = document.querySelector('div');

        if (locals) locals.forEach((el) => div.innerHTML += `<a href="#">${el}</a>`)


        div.addEventListener('click', function (event) {
            if (event.target.tagName === 'A') {
                textarea.value = '';
                textarea.value = localStorage.getItem(event.target.innerHTML);
            }
        });

        textarea.addEventListener('keyup', function (event) {
            if (event.key === 'Enter') {
                let d = new Date;
                let dayY = d.getFullYear();
                let dayM = d.getMonth() + 1;
                dayM = dayM < 10 ? '0' + dayM : dayM;

                let dayD = d.getDate();
                dayD = dayD < 10 ? '0' + dayD : dayD;

                let dayH = d.getHours();
                dayH = dayH < 10 ? '0' + dayH : dayH;

                let dayMn = d.getMinutes();
                dayMn = dayMn < 10 ? '0' + dayMn : dayMn;

                let dayS = d.getSeconds();
                dayS = dayS < 10 ? '0' + dayS : dayS;

                let dateD = `${dayY}.${dayM}.${dayD}-${dayH}:${dayMn}:${dayS}`;
                let dateVal = textarea.value;
                textarea.value = '';
                div.innerHTML += `<a href="#">${dateD}</a>`
                localStorage.setItem(dateD, dateVal);
            }
        });
        
        document.querySelector('input').addEventListener('click', function () {
			let text = textarea.value;
			console.log(this)
			for (let i of locals){
			    if (localStorage.getItem(i) === text){
			        delete localStorage[i];
				}
			}
        })
    })();
</script>
</body>
</html>